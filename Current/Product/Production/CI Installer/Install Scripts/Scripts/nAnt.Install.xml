<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://nant.sf.net/schemas/nant.xsd" name="nAntInstaller" >

  <property name="NAnt.Target.Directory.Path" value="${Common.Directory.Tools.Path}\nAnt"/>

  <!-- These are private... -->
  
  <property name="Private.nAnt.DefaultBuildDirectory" value="${SourceRoot}\nAnt"/>

  <target name="nAnt.Install" depends="nAnt.ValidateParameters" >

    <copy todir="${Common.Directory.Tools.Path}" overwrite="True">
      <fileset basedir="${SourceBuildDirectory}\Tools">
        <include name="**\*"/>
      </fileset>
    </copy>
    
    <copy todir="${Common.Directory.Build.Path}" overwrite="true">
			<fileset basedir="${SourceBuildDirectory}">
				<include name="Main.build.xml"/>
				<include name="Properties.build.xml"/>
        <include name="Entities.xml"/>
				<include name="Common.build.xml"/>
        <include name="Custom.build.xml"/>
				<include name="Scratch.build.xml"/>
        <include name="Scratch.cs"/>
				<include name="UpdatenAntSchema.xml"/>
				<include name="Post.build.xml"/>
				<include name="Post.Shim.xml"/>
				<include name="SetupIIS.xml"/>
        <include name="CreateBranch.xml"/>
        <include name="EnvironmentVariables\EnvironmentVariables.xml"/>
        <exclude name="*.bat"/>
      </fileset>
      <filterchain refid="Common.FilterChain" />
		</copy>

    <copy todir="${Common.Directory.Build.Path}" overwrite="true">
      <fileset basedir="${SourceBuildDirectory}">
        <include name="*.bat"/>
      </fileset>
    </copy>

		<copy todir="${Common.Directory.Product.Path}" overwrite="true">
      <fileset basedir="${SourceProductDirectory}">
        <include name="*.*"/>
        <exclude name="*.bat"/>
      </fileset>
      <filterchain refid="Common.FilterChain" />
    </copy>

    <copy todir="${Common.Directory.Product.Path}" overwrite="true">
      <fileset basedir="${SourceProductDirectory}">
        <include name="*.bat"/>
      </fileset>
    </copy>
    
    <call target="Private.nAnt.CopyToBuild"/>
  </target>

  <target name="nAnt.ValidateParameters">

  </target>

  <target name="Private.nAnt.CopyToBuild">
    <copy todir="${NAnt.Target.Directory.Path}" overwrite="true">
      <fileset basedir="${Private.nAnt.DefaultBuildDirectory}">
        <include name="**/*" />
      </fileset>
    </copy>
  </target>

</project>