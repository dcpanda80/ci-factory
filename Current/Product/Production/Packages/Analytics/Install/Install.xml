<?xml version="1.0" encoding="utf-8" ?>
<project xmlns="http://nant.sf.net/schemas/nant.xsd" name="Analytics.Install" default="Analytics.Install">

  <include buildfile="Properties.xml" />

  <target name="Analytics.Install">
    <largeproperty name="Packages.AddPostBuildActions.Block">
      <value xml="false">
        <![CDATA[<call target="Analytics.CompileReports" failonerror="false"/>]]>
      </value>
    </largeproperty>
    <call target="Packages.AddPostBuildActions"/>

    <largeproperty name="Packages.AddbuildPlugins.Block">
      <value xml="false" expand="true"><![CDATA[<artifactXslBuildPlugin description="Analytics Report" actionName="AnalyticsReport" xslFileName="Packages\Analytics\Basic\statistics.xsl" artifactRootUrl="/&ProjectName;-&ProjectCodeLineName;/Artifacts" xmlFileName="MainAnalyticsReport.xml"  imageFileName="Packages\Analytics\Analytics.gif" />]]></value>
    </largeproperty>
    <call target="Packages.AddbuildPlugins"/>

    <largeproperty name="Packages.AddbuildReportBuildPlugin.Block">
      <value xml="false"><![CDATA[<!-- Analytics should be the very first build report plugin -->
      <xslFile>Packages\Analytics\Basic\SatisticsSummary.xsl</xslFile>]]></value>
    </largeproperty>
    <call target="Packages.AddbuildReportBuildPlugin"/>


    <copy todir="${Common.Directory.Build.Path}" >
      <fileset basedir="${SourcePackagesDirectory}\Analytics\Install\Other">
        <include name="*.*"/>
      </fileset>
      <filterchain refid="Common.FilterChain" />
    </copy>
  </target>

  <target name="Analytics.SetAsCurrentPackage">
    <property name="Packages.CurrentPackage.PackageName" value="Analytics"/>
    <property name="Current.BuildFile" value="${Common.Directory.Build.Path}\Post.Build.xml"/>
  </target>

  <target name="Analytics.ValidateParameters">

  </target>

</project>