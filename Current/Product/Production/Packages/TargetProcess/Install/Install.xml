<?xml version="1.0" encoding="utf-8" ?>
<project xmlns="http://nant.sf.net/schemas/nant.xsd" name="TargetProcess.Install" default="TargetProcess.Install">

  <include buildfile="Properties.xml" />
  
  <target name="TargetProcess.Install">
    <largeproperty name="Packages.AddPreBuildActions.Block">
      <value xml="false">
			<![CDATA[<call target="TargetProcess.CreateReport" />]]></value>
    </largeproperty>
    <call target="Packages.AddPreBuildActions"/>

    <strings id="NAnt.Main.Targets">
      <string value="Deploy"/>
      <string value="Test"/>
    </strings>
    <largeproperty name="Packages.AddPreBuildActions.Block">
      <value xml="false">
        <![CDATA[<call target="TargetProcess.Get.Release.Report" />]]>
      </value>
    </largeproperty>
    <call target="Packages.AddPreBuildActions"/>

    <largeproperty name="Packages.AddbuildReportBuildPlugin.Block">
      <value xml="false"><![CDATA[<xslFile>Packages\TargetProcess\TargetProcess.xsl</xslFile>]]></value>
    </largeproperty>
    <call target="Packages.AddbuildReportBuildPlugin"/>

    <strings id="CCNet.Build.Types">
      <string value="Dev"/>
      <string value="Heavy"/>
      <string value="Release"/>
      <string value="Deploy"/>
      <string value="Test"/>
    </strings>
    <largeproperty name="Packages.AddMergeFiles.Block" dynamic="true">
      <value><![CDATA[<file>&Common.Directory.Transient.Path;\&ProjectName;-&ProjectCodeLineName;-${CCNet.Build.Type}\TargetProcess\*.xml</file>]]></value>
    </largeproperty>
    <call target="Packages.AddMergeFiles"/>
  </target>

  <target name="TargetProcess.SetAsCurrentPackage">
    <property name="Packages.CurrentPackage.PackageName" value="TargetProcess"/>
  </target>

  <target name="TargetProcess.ValidateParameters">
		<fail unless="${property::exists('TargetProcess.Url')}" message="Please set the property TargetProcess.Url"/>
		<fail unless="${property::exists('TargetProcess.UserName')}" message="Please set the property TargetProcess.UserName"/>
		<fail unless="${property::exists('TargetProcess.Password')}" message="Please set the property TargetProcess.Password"/>
  </target>
  
</project>